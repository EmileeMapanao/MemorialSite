<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="allcomments">
        <h3>Comments</h3>
        <!--Show comments that have already been made-->
        <ul id="pastcomments"></ul>
        <form id="newcomment">
            <label for="tbName">Name</label>
            <br>
            <input id="tbName" type="text" maxLength="20" required>
            <br>
            <label for="txComment">Input Text</label>
            <br>
            <textarea id="txComment" maxlength="4096" required></textarea>
            <br>
            <input type="submit" id="btnSubmitComment" value="Submit">
        </form>
    </div>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";
        import { getDatabase, ref, child, set, get, push } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-database.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-analytics.js";
        // Import the functions you need from the SDKs you need
       
       
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyDk1UgfIbXomLDJqi473t73dqC9YaPuSHQ",
          authDomain: "memorialwebsite-82edf.firebaseapp.com",
          databaseURL: "https://memorialwebsite-82edf-default-rtdb.firebaseio.com",
          projectId: "memorialwebsite-82edf",
          storageBucket: "memorialwebsite-82edf.appspot.com",
          messagingSenderId: "1029058327991",
          appId: "1:1029058327991:web:411d72a5494979eae8a432",
          measurementId: "G-7N1DDTDBLV"
        };
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        const rootRef = ref(database);
       
        document.getElementById("btnSubmitComment").addEventListener("click", function() {
            var newComment = document.getElementById('txComment').value;

            var newPostRef = push(child(rootRef, 'memorialWebsite'));
            set(rootRef, 'comments')({
                name: document.getElementById('tbName').value.trim(),
                comment: newComment.trim()
            });
        });
      </script>
</body>
</html>